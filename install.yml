---
- name: webserver installation (with documentation)
  hosts: webserver
  remote_user: root
  
  tasks:
    - name: apache & php installation
      apt:
        pkg:
          - apache2
          - php

    - name: add user
      user:
        name: "{{ user  }}"
        password: !
        shell: /bin/false

    - name: create user folder
      file: 
        path: /var/www/{{ domain  }}
        state: directory
        owner: "{{ user  }}"
        group: "{{ user  }}"
        mode: 0755

    - name: phpinfo
      copy:
        src: files/index.php
        dest: /var/www/{{ domain  }}
        root@ansible:/home/sysadmin/server-apache# mcedit install.yml
/home/sysadmin/server-apache/install.yml   [BM--]  8 L:[  1+30  31/ 32] *(604 / 605b) 0010 0x00A                                                                                                                                                                                                           [*][X]
---
- name: webserver installation (with documentation)
  hosts: webserver
  remote_user: root
..
  tasks:
    - name: apache & php installation
      apt:
        pkg:
          - apache2
          - php

    - name: add user
      user:
        name: "{{ user  }}"
        password: !
        shell: /bin/false

    - name: create user folder
      file:.
        path: /var/www/{{ domain  }}
        state: directory
        owner: "{{ user  }}"
        group: "{{ user  }}"
        mode: 0755

    - name: phpinfo
      copy:
        src: files/index.php
        dest: /var/www/{{ domain  }}
        owner: "{{ user  }}"
        group: "{{ user  }}"
        mode: 0644